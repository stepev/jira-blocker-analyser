# jira-blocker-analyser
## Кластеризация блокеров
"Blocker clustering" - это одна из ключевых важных практик Канбан метода, предназначенная для управления препятствиями или "блокерами", которые замедляют рабочий процесс. На практике, блокеры - это то, что препятствует выполнению задачи и останавливает её движение по Канбан доске.

Суть практики "Blocker clustering" заключается в сборе информации о блокировках, их категоризации и анализе. Это помогает командам увидеть общие шаблоны, понять причины этих препятствий и найти решения для их устранения. Фактически, это практика управления рисками.

Основные этапы практики следующие:

1. Отметка блокировок элементов: Важно ясно идентифицировать и отметить блокируемые и блокирующие рабочие элементы, чтобы они были видны всей команде.
2. Сбор данных о блокерах: собирается информация о блокировках, включая продолжительность блокировки, влияние на задачи и причины блокировки.
3. Кластеризация блокеров: Блокеры затем кластеризуются по общим причинам или темам. Это может быть сделано вместе с командой в процессе совместного анализа.
4. Выбор решений и их реализация: На основании общих причин блокировок команда формулирует действия по их устранению и более эффективному управлению рабочим процессом.

## Учёт блокировок в Jira
Распространённой практикой учёта блокировок в Jira является пометка заблокированных задач флажком. Это очень удобно с точки визуализации, их сразу же видно на Канбан доске. Но для анализа требуется вручную просмотреть комментарии и историю задач.

## Скрипт сбора информации о блокировках флагом в Jira
Скрипт автоматически выяснит, когда блокировка началась и когда закончилась. Можно легко увидеть, сколько времени задача была заблокирована. Это помогает командам приступить к работе над улучшением своих процессов и устранением препятствий.

Особенностью скрипта является сбор комментариев, которые были оставлены во время блокировки. Благодаря этому можно понимать, что происходило с задачей в период блокировки. Кроме того, вывод данных можно организовать так, как это удобно вам: вы можете просмотреть результат прямо в консоли, или же сохранить его в формате CSV или Excel для дальнейшего анализа.

Скрипт подключается по API к вашей Jira, выбирает все задачи, которые когда либо были помечены флагом и для каждой блокировки выводит:
* Issue key
* Заголовок задачи (Issue Summary)
* Дату и время установки и снятия блокировки (флажка)
	* Если флаг не был снят, то в качестве окончания времени блокировки будет принято время следующей смены статуса задачи и будет выведено предупреждение об этом
* Общее время блокировки (в днях или в часах — задаётся параметром **--time-unit**)
* Категорию блокировки
	* Скрипт ищет в комментарии слово, начинающееся с # и считает его меткой категории. При установке флага, добавляя в комментарий тег причины блокировки, вы облегчите себе кластеризацию блокировок
* Все комментарии в промежутке времени между установкой и снятием блокировки


### Командная строка
Предусмотрены следующие параметры командной строки:

**--jira-server**: Задайте URL адрес вашего сервера Jira


**--project**: Опционально. Данный параметр определяет имя Jira проекта, который вы хотите анализировать.

**--team** : Опционально. Если в одном проекте работает несколько команд и вы используете поле team для для их различения, укажите значение

**--jql**: Опционально. Задайте JQL фильтр для выбора задач из Jira для анализа, вместо или в дополнение к параметрам project и team. Не используйте в вашем JQL проект и команду, если указываете их в атрибутах командной строки. Не используйте в JQL условие "resolutiondate >= ...", используйте атрибут командной строки --date вместо этого. Не используйте в JQL условие ' and comment ~ "(flag) Flag added"', оно будет добавлено автоматически. Не используйте в JQL "ORDER by ...".

**--date**: Опционально. Этот параметр определяет начальную дату для анализа. Он ограничивает поиск задач, которые были закрыты после указанной даты. Если вы не указали значение, по умолчанию скрипт обрабатывает задачи за последние 30 дней.

**--user**: Здесь указывается имя пользователя Jira.

**--password**: Это пароль для учетной записи Jira, указанной в параметре --user.

**--mode**: Опционально. Этот параметр определяет способ вывода результатов анализа. Параметр может принимать значения 'print', 'csv', 'xlsx', что соответствует выводу информации в консоли в текстовом виде, в csv-файл или Excel-файл соответственно. По умолчанию выбран 'print'.

**--output-file**: Опционально. Имя файла без расширения для сохранения результатов, если параметр --mode установлен как 'csv' или 'xlsx'. По умолчанию используется 'blockers'. Скрипт добавляет к имени файла текущую дату и время.

**--category-pattern**: Опционально. regexp паттерн для поиска в комментарии категории блокировки. По умолчанию ищется слово, начинающееся с '#'. Если вы используете другой способ, задайте здесь критерии поиска для него

**--time-unit**: Опционально. В каких единицах выводить время блокировки: `days` (дни) или `hours` (часы). По умолчанию — `days`. Внутри скрипта время хранится в секундах; перевод в дни или часы выполняется только при выводе (в консоль, CSV или Excel).

Работать с скриптом просто: задайте нужные вам значения для перечисленных параметров, и скрипт получит из Jira все задачи в заданном проекте, закрытые начиная с заданной даты, у которых хотя бы раз был установлен флаг и выполнит анализ блокировок по заданным параметрам. Вы можете задать свои значения по умолчанию, отредактировав скрипт. Будьте осторожны, не рекомендуется сохранять в скрипте пароль!

## Обратная связь
Чтобы предложить улучшения к скрипту, создайте issue в github.


P.S. Скрипт написан в соавторстве с GPT4 ;)
